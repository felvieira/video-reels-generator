"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/check-payment";
exports.ids = ["pages/api/check-payment"];
exports.modules = {

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "appwrite":
/*!***************************!*\
  !*** external "appwrite" ***!
  \***************************/
/***/ ((module) => {

module.exports = import("appwrite");;

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fcheck-payment&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Ccheck-payment.js&middlewareConfigBase64=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fcheck-payment&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Ccheck-payment.js&middlewareConfigBase64=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _src_pages_api_check_payment_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src\\pages\\api\\check-payment.js */ \"(api)/./src/pages/api/check-payment.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_src_pages_api_check_payment_js__WEBPACK_IMPORTED_MODULE_3__]);\n_src_pages_api_check_payment_js__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_check_payment_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_check_payment_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/check-payment\",\n        pathname: \"/api/check-payment\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _src_pages_api_check_payment_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmNoZWNrLXBheW1lbnQmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZzcmMlNUNwYWdlcyU1Q2FwaSU1Q2NoZWNrLXBheW1lbnQuanMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDZ0U7QUFDaEU7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLDREQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyw0REFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQscUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aWRlby1lZGl0b3ItYXBwLz8zNDk5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9zcmNcXFxccGFnZXNcXFxcYXBpXFxcXGNoZWNrLXBheW1lbnQuanNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9jaGVjay1wYXltZW50XCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvY2hlY2stcGF5bWVudFwiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fcheck-payment&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Ccheck-payment.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./src/lib/appwrite.js":
/*!*****************************!*\
  !*** ./src/lib/appwrite.js ***!
  \*****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Query: () => (/* reexport safe */ appwrite__WEBPACK_IMPORTED_MODULE_0__.Query),\n/* harmony export */   client: () => (/* binding */ client),\n/* harmony export */   createLicense: () => (/* binding */ createLicense),\n/* harmony export */   databases: () => (/* binding */ databases),\n/* harmony export */   deactivateLicense: () => (/* binding */ deactivateLicense),\n/* harmony export */   generateSerial: () => (/* binding */ generateSerial),\n/* harmony export */   verifyLicense: () => (/* binding */ verifyLicense)\n/* harmony export */ });\n/* harmony import */ var appwrite__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! appwrite */ \"appwrite\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([appwrite__WEBPACK_IMPORTED_MODULE_0__]);\nappwrite__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n// Configurações do Appwrite\nconst APPWRITE_ENDPOINT = \"https://appwrite-backend.felvieira.com.br/v1\";\nconst APPWRITE_PROJECT_ID = \"67336cb10029a804c3d5\";\nconst APPWRITE_API_KEY = \"63c62c9c205f389ebfb185d974702f71afd9a7bdbbbe45c0713558076dfda6c5d82d82c7cc6cb288f872ba277de7afc6373ee4bfcd0ec62166d8216e7000e9a8e0111003b68e416338986e02af386e3ad5a16e21e67f353a222cd89ef09d5581b84d08e634e22c0a7c44b062ebca3b46e1472676f92598ff9b092f7909accc44\";\nconst client = new appwrite__WEBPACK_IMPORTED_MODULE_0__.Client().setEndpoint(APPWRITE_ENDPOINT).setProject(APPWRITE_PROJECT_ID);\n// No cliente, usamos setSession() para autenticação\n// Não precisamos da API key no cliente, ela só é usada no servidor\nconst databases = new appwrite__WEBPACK_IMPORTED_MODULE_0__.Databases(client);\n// Funções de licença e serial\nconst generateSerial = (email)=>{\n    return `VRG-${appwrite__WEBPACK_IMPORTED_MODULE_0__.ID.unique().split(\"-\")[0].toUpperCase()}`;\n};\nconst createLicense = async (email, paymentId)=>{\n    const serial = generateSerial(email);\n    return await databases.createDocument(\"video_reels_db\", \"licenses\", appwrite__WEBPACK_IMPORTED_MODULE_0__.ID.unique(), {\n        email,\n        serial,\n        paymentId,\n        createdAt: new Date().toISOString(),\n        active: true\n    });\n};\nconst verifyLicense = async (email, serial)=>{\n    try {\n        const response = await databases.listDocuments(\"video_reels_db\", \"licenses\", [\n            appwrite__WEBPACK_IMPORTED_MODULE_0__.Query.equal(\"email\", email),\n            appwrite__WEBPACK_IMPORTED_MODULE_0__.Query.equal(\"serial\", serial),\n            appwrite__WEBPACK_IMPORTED_MODULE_0__.Query.equal(\"active\", true)\n        ]);\n        return response.documents.length > 0;\n    } catch (error) {\n        console.error(\"Erro ao verificar licen\\xe7a:\", error);\n        return false;\n    }\n};\nconst deactivateLicense = async (email, serial)=>{\n    try {\n        const response = await databases.listDocuments(\"video_reels_db\", \"licenses\", [\n            appwrite__WEBPACK_IMPORTED_MODULE_0__.Query.equal(\"email\", email),\n            appwrite__WEBPACK_IMPORTED_MODULE_0__.Query.equal(\"serial\", serial)\n        ]);\n        if (response.documents.length > 0) {\n            const license = response.documents[0];\n            return await databases.updateDocument(\"video_reels_db\", \"licenses\", license.$id, {\n                active: false\n            });\n        }\n        throw new Error(\"Licen\\xe7a n\\xe3o encontrada\");\n    } catch (error) {\n        console.error(\"Erro ao desativar licen\\xe7a:\", error);\n        throw error;\n    }\n};\n\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvbGliL2FwcHdyaXRlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQXdEO0FBRXhELDRCQUE0QjtBQUM1QixNQUFNSSxvQkFBb0I7QUFDMUIsTUFBTUMsc0JBQXNCO0FBQzVCLE1BQU1DLG1CQUFtQjtBQUV6QixNQUFNQyxTQUFTLElBQUlQLDRDQUFNQSxHQUNwQlEsV0FBVyxDQUFDSixtQkFDWkssVUFBVSxDQUFDSjtBQUVoQixvREFBb0Q7QUFDcEQsbUVBQW1FO0FBQ25FLE1BQU1LLFlBQVksSUFBSVQsK0NBQVNBLENBQUNNO0FBRWhDLDhCQUE4QjtBQUN2QixNQUFNSSxpQkFBaUIsQ0FBQ0M7SUFDM0IsT0FBTyxDQUFDLElBQUksRUFBRVYsd0NBQUVBLENBQUNXLE1BQU0sR0FBR0MsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUNDLFdBQVcsR0FBRyxDQUFDO0FBQzNELEVBQUU7QUFFSyxNQUFNQyxnQkFBZ0IsT0FBT0osT0FBT0s7SUFDdkMsTUFBTUMsU0FBU1AsZUFBZUM7SUFFOUIsT0FBTyxNQUFNRixVQUFVUyxjQUFjLENBQ2pDLGtCQUNBLFlBQ0FqQix3Q0FBRUEsQ0FBQ1csTUFBTSxJQUNUO1FBQ0lEO1FBQ0FNO1FBQ0FEO1FBQ0FHLFdBQVcsSUFBSUMsT0FBT0MsV0FBVztRQUNqQ0MsUUFBUTtJQUNaO0FBRVIsRUFBRTtBQUVLLE1BQU1DLGdCQUFnQixPQUFPWixPQUFPTTtJQUN2QyxJQUFJO1FBQ0EsTUFBTU8sV0FBVyxNQUFNZixVQUFVZ0IsYUFBYSxDQUMxQyxrQkFDQSxZQUNBO1lBQ0l2QiwyQ0FBS0EsQ0FBQ3dCLEtBQUssQ0FBQyxTQUFTZjtZQUNyQlQsMkNBQUtBLENBQUN3QixLQUFLLENBQUMsVUFBVVQ7WUFDdEJmLDJDQUFLQSxDQUFDd0IsS0FBSyxDQUFDLFVBQVU7U0FDekI7UUFHTCxPQUFPRixTQUFTRyxTQUFTLENBQUNDLE1BQU0sR0FBRztJQUN2QyxFQUFFLE9BQU9DLE9BQU87UUFDWkMsUUFBUUQsS0FBSyxDQUFDLGlDQUE4QkE7UUFDNUMsT0FBTztJQUNYO0FBQ0osRUFBRTtBQUVLLE1BQU1FLG9CQUFvQixPQUFPcEIsT0FBT007SUFDM0MsSUFBSTtRQUNBLE1BQU1PLFdBQVcsTUFBTWYsVUFBVWdCLGFBQWEsQ0FDMUMsa0JBQ0EsWUFDQTtZQUNJdkIsMkNBQUtBLENBQUN3QixLQUFLLENBQUMsU0FBU2Y7WUFDckJULDJDQUFLQSxDQUFDd0IsS0FBSyxDQUFDLFVBQVVUO1NBQ3pCO1FBR0wsSUFBSU8sU0FBU0csU0FBUyxDQUFDQyxNQUFNLEdBQUcsR0FBRztZQUMvQixNQUFNSSxVQUFVUixTQUFTRyxTQUFTLENBQUMsRUFBRTtZQUNyQyxPQUFPLE1BQU1sQixVQUFVd0IsY0FBYyxDQUNqQyxrQkFDQSxZQUNBRCxRQUFRRSxHQUFHLEVBQ1g7Z0JBQ0laLFFBQVE7WUFDWjtRQUVSO1FBRUEsTUFBTSxJQUFJYSxNQUFNO0lBQ3BCLEVBQUUsT0FBT04sT0FBTztRQUNaQyxRQUFRRCxLQUFLLENBQUMsaUNBQThCQTtRQUM1QyxNQUFNQTtJQUNWO0FBQ0osRUFBRTtBQUVrQyIsInNvdXJjZXMiOlsid2VicGFjazovL3ZpZGVvLWVkaXRvci1hcHAvLi9zcmMvbGliL2FwcHdyaXRlLmpzP2UxZDgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ2xpZW50LCBEYXRhYmFzZXMsIElELCBRdWVyeSB9IGZyb20gXCJhcHB3cml0ZVwiO1xuXG4vLyBDb25maWd1cmHDp8O1ZXMgZG8gQXBwd3JpdGVcbmNvbnN0IEFQUFdSSVRFX0VORFBPSU5UID0gJ2h0dHBzOi8vYXBwd3JpdGUtYmFja2VuZC5mZWx2aWVpcmEuY29tLmJyL3YxJztcbmNvbnN0IEFQUFdSSVRFX1BST0pFQ1RfSUQgPSAnNjczMzZjYjEwMDI5YTgwNGMzZDUnO1xuY29uc3QgQVBQV1JJVEVfQVBJX0tFWSA9ICc2M2M2MmM5YzIwNWYzODllYmZiMTg1ZDk3NDcwMmY3MWFmZDlhN2JkYmJiZTQ1YzA3MTM1NTgwNzZkZmRhNmM1ZDgyZDgyYzdjYzZjYjI4OGY4NzJiYTI3N2RlN2FmYzYzNzNlZTRiZmNkMGVjNjIxNjZkODIxNmU3MDAwZTlhOGUwMTExMDAzYjY4ZTQxNjMzODk4NmUwMmFmMzg2ZTNhZDVhMTZlMjFlNjdmMzUzYTIyMmNkODllZjA5ZDU1ODFiODRkMDhlNjM0ZTIyYzBhN2M0NGIwNjJlYmNhM2I0NmUxNDcyNjc2ZjkyNTk4ZmY5YjA5MmY3OTA5YWNjYzQ0JztcblxuY29uc3QgY2xpZW50ID0gbmV3IENsaWVudCgpXG4gICAgLnNldEVuZHBvaW50KEFQUFdSSVRFX0VORFBPSU5UKVxuICAgIC5zZXRQcm9qZWN0KEFQUFdSSVRFX1BST0pFQ1RfSUQpO1xuXG4vLyBObyBjbGllbnRlLCB1c2Ftb3Mgc2V0U2Vzc2lvbigpIHBhcmEgYXV0ZW50aWNhw6fDo29cbi8vIE7Do28gcHJlY2lzYW1vcyBkYSBBUEkga2V5IG5vIGNsaWVudGUsIGVsYSBzw7Mgw6kgdXNhZGEgbm8gc2Vydmlkb3JcbmNvbnN0IGRhdGFiYXNlcyA9IG5ldyBEYXRhYmFzZXMoY2xpZW50KTtcblxuLy8gRnVuw6fDtWVzIGRlIGxpY2Vuw6dhIGUgc2VyaWFsXG5leHBvcnQgY29uc3QgZ2VuZXJhdGVTZXJpYWwgPSAoZW1haWwpID0+IHtcbiAgICByZXR1cm4gYFZSRy0ke0lELnVuaXF1ZSgpLnNwbGl0KCctJylbMF0udG9VcHBlckNhc2UoKX1gO1xufTtcblxuZXhwb3J0IGNvbnN0IGNyZWF0ZUxpY2Vuc2UgPSBhc3luYyAoZW1haWwsIHBheW1lbnRJZCkgPT4ge1xuICAgIGNvbnN0IHNlcmlhbCA9IGdlbmVyYXRlU2VyaWFsKGVtYWlsKTtcbiAgICBcbiAgICByZXR1cm4gYXdhaXQgZGF0YWJhc2VzLmNyZWF0ZURvY3VtZW50KFxuICAgICAgICAndmlkZW9fcmVlbHNfZGInLFxuICAgICAgICAnbGljZW5zZXMnLFxuICAgICAgICBJRC51bmlxdWUoKSxcbiAgICAgICAge1xuICAgICAgICAgICAgZW1haWwsXG4gICAgICAgICAgICBzZXJpYWwsXG4gICAgICAgICAgICBwYXltZW50SWQsXG4gICAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgIGFjdGl2ZTogdHJ1ZVxuICAgICAgICB9XG4gICAgKTtcbn07XG5cbmV4cG9ydCBjb25zdCB2ZXJpZnlMaWNlbnNlID0gYXN5bmMgKGVtYWlsLCBzZXJpYWwpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGRhdGFiYXNlcy5saXN0RG9jdW1lbnRzKFxuICAgICAgICAgICAgJ3ZpZGVvX3JlZWxzX2RiJyxcbiAgICAgICAgICAgICdsaWNlbnNlcycsXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgUXVlcnkuZXF1YWwoJ2VtYWlsJywgZW1haWwpLFxuICAgICAgICAgICAgICAgIFF1ZXJ5LmVxdWFsKCdzZXJpYWwnLCBzZXJpYWwpLFxuICAgICAgICAgICAgICAgIFF1ZXJ5LmVxdWFsKCdhY3RpdmUnLCB0cnVlKVxuICAgICAgICAgICAgXVxuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiByZXNwb25zZS5kb2N1bWVudHMubGVuZ3RoID4gMDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvIGFvIHZlcmlmaWNhciBsaWNlbsOnYTonLCBlcnJvcik7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59O1xuXG5leHBvcnQgY29uc3QgZGVhY3RpdmF0ZUxpY2Vuc2UgPSBhc3luYyAoZW1haWwsIHNlcmlhbCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZGF0YWJhc2VzLmxpc3REb2N1bWVudHMoXG4gICAgICAgICAgICAndmlkZW9fcmVlbHNfZGInLFxuICAgICAgICAgICAgJ2xpY2Vuc2VzJyxcbiAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICBRdWVyeS5lcXVhbCgnZW1haWwnLCBlbWFpbCksXG4gICAgICAgICAgICAgICAgUXVlcnkuZXF1YWwoJ3NlcmlhbCcsIHNlcmlhbClcbiAgICAgICAgICAgIF1cbiAgICAgICAgKTtcblxuICAgICAgICBpZiAocmVzcG9uc2UuZG9jdW1lbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGxpY2Vuc2UgPSByZXNwb25zZS5kb2N1bWVudHNbMF07XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgZGF0YWJhc2VzLnVwZGF0ZURvY3VtZW50KFxuICAgICAgICAgICAgICAgICd2aWRlb19yZWVsc19kYicsXG4gICAgICAgICAgICAgICAgJ2xpY2Vuc2VzJyxcbiAgICAgICAgICAgICAgICBsaWNlbnNlLiRpZCxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZTogZmFsc2VcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdMaWNlbsOnYSBuw6NvIGVuY29udHJhZGEnKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvIGFvIGRlc2F0aXZhciBsaWNlbsOnYTonLCBlcnJvcik7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbn07XG5cbmV4cG9ydCB7IGNsaWVudCwgZGF0YWJhc2VzLCBRdWVyeSB9OyAiXSwibmFtZXMiOlsiQ2xpZW50IiwiRGF0YWJhc2VzIiwiSUQiLCJRdWVyeSIsIkFQUFdSSVRFX0VORFBPSU5UIiwiQVBQV1JJVEVfUFJPSkVDVF9JRCIsIkFQUFdSSVRFX0FQSV9LRVkiLCJjbGllbnQiLCJzZXRFbmRwb2ludCIsInNldFByb2plY3QiLCJkYXRhYmFzZXMiLCJnZW5lcmF0ZVNlcmlhbCIsImVtYWlsIiwidW5pcXVlIiwic3BsaXQiLCJ0b1VwcGVyQ2FzZSIsImNyZWF0ZUxpY2Vuc2UiLCJwYXltZW50SWQiLCJzZXJpYWwiLCJjcmVhdGVEb2N1bWVudCIsImNyZWF0ZWRBdCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImFjdGl2ZSIsInZlcmlmeUxpY2Vuc2UiLCJyZXNwb25zZSIsImxpc3REb2N1bWVudHMiLCJlcXVhbCIsImRvY3VtZW50cyIsImxlbmd0aCIsImVycm9yIiwiY29uc29sZSIsImRlYWN0aXZhdGVMaWNlbnNlIiwibGljZW5zZSIsInVwZGF0ZURvY3VtZW50IiwiJGlkIiwiRXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/lib/appwrite.js\n");

/***/ }),

/***/ "(api)/./src/pages/api/check-payment.js":
/*!****************************************!*\
  !*** ./src/pages/api/check-payment.js ***!
  \****************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_appwrite__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/appwrite */ \"(api)/./src/lib/appwrite.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_appwrite__WEBPACK_IMPORTED_MODULE_0__]);\n_lib_appwrite__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\nasync function handler(req, res) {\n    if (req.method !== \"POST\") {\n        return res.status(405).json({\n            message: \"Method not allowed\"\n        });\n    }\n    const { email } = req.body;\n    try {\n        // Buscar licença mais recente do usuário\n        const response = await _lib_appwrite__WEBPACK_IMPORTED_MODULE_0__.databases.listDocuments(\"video_reels_db\", \"licenses\", [\n            _lib_appwrite__WEBPACK_IMPORTED_MODULE_0__.Query.equal(\"email\", email),\n            _lib_appwrite__WEBPACK_IMPORTED_MODULE_0__.Query.orderDesc(\"createdAt\"),\n            _lib_appwrite__WEBPACK_IMPORTED_MODULE_0__.Query.limit(1)\n        ]);\n        if (response.documents.length > 0) {\n            const license = response.documents[0];\n            // Se encontrou uma licença ativa\n            if (license.active) {\n                return res.status(200).json({\n                    status: \"success\",\n                    serial: license.serial\n                });\n            }\n        }\n        // Se não encontrou licença ativa\n        return res.status(200).json({\n            status: \"pending\"\n        });\n    } catch (error) {\n        console.error(\"Erro ao verificar licen\\xe7a:\", error);\n        return res.status(500).json({\n            status: \"failed\",\n            error: error.message\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvcGFnZXMvYXBpL2NoZWNrLXBheW1lbnQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBa0Q7QUFFbkMsZUFBZUUsUUFBUUMsR0FBRyxFQUFFQyxHQUFHO0lBQzFDLElBQUlELElBQUlFLE1BQU0sS0FBSyxRQUFRO1FBQ3ZCLE9BQU9ELElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRUMsU0FBUztRQUFxQjtJQUNoRTtJQUVBLE1BQU0sRUFBRUMsS0FBSyxFQUFFLEdBQUdOLElBQUlPLElBQUk7SUFFMUIsSUFBSTtRQUNBLHlDQUF5QztRQUN6QyxNQUFNQyxXQUFXLE1BQU1YLG9EQUFTQSxDQUFDWSxhQUFhLENBQzFDLGtCQUNBLFlBQ0E7WUFDSVgsZ0RBQUtBLENBQUNZLEtBQUssQ0FBQyxTQUFTSjtZQUNyQlIsZ0RBQUtBLENBQUNhLFNBQVMsQ0FBQztZQUNoQmIsZ0RBQUtBLENBQUNjLEtBQUssQ0FBQztTQUNmO1FBR0wsSUFBSUosU0FBU0ssU0FBUyxDQUFDQyxNQUFNLEdBQUcsR0FBRztZQUMvQixNQUFNQyxVQUFVUCxTQUFTSyxTQUFTLENBQUMsRUFBRTtZQUVyQyxpQ0FBaUM7WUFDakMsSUFBSUUsUUFBUUMsTUFBTSxFQUFFO2dCQUNoQixPQUFPZixJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO29CQUN4QkQsUUFBUTtvQkFDUmMsUUFBUUYsUUFBUUUsTUFBTTtnQkFDMUI7WUFDSjtRQUNKO1FBRUEsaUNBQWlDO1FBQ2pDLE9BQU9oQixJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQ3hCRCxRQUFRO1FBQ1o7SUFFSixFQUFFLE9BQU9lLE9BQU87UUFDWkMsUUFBUUQsS0FBSyxDQUFDLGlDQUE4QkE7UUFDNUMsT0FBT2pCLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFDeEJELFFBQVE7WUFDUmUsT0FBT0EsTUFBTWIsT0FBTztRQUN4QjtJQUNKO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aWRlby1lZGl0b3ItYXBwLy4vc3JjL3BhZ2VzL2FwaS9jaGVjay1wYXltZW50LmpzP2FhYjAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZGF0YWJhc2VzLCBRdWVyeSB9IGZyb20gXCJAL2xpYi9hcHB3cml0ZVwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcykge1xyXG4gICAgaWYgKHJlcS5tZXRob2QgIT09ICdQT1NUJykge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNSkuanNvbih7IG1lc3NhZ2U6ICdNZXRob2Qgbm90IGFsbG93ZWQnIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHsgZW1haWwgfSA9IHJlcS5ib2R5O1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgLy8gQnVzY2FyIGxpY2Vuw6dhIG1haXMgcmVjZW50ZSBkbyB1c3XDoXJpb1xyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZGF0YWJhc2VzLmxpc3REb2N1bWVudHMoXHJcbiAgICAgICAgICAgICd2aWRlb19yZWVsc19kYicsXHJcbiAgICAgICAgICAgICdsaWNlbnNlcycsXHJcbiAgICAgICAgICAgIFtcclxuICAgICAgICAgICAgICAgIFF1ZXJ5LmVxdWFsKCdlbWFpbCcsIGVtYWlsKSxcclxuICAgICAgICAgICAgICAgIFF1ZXJ5Lm9yZGVyRGVzYygnY3JlYXRlZEF0JyksXHJcbiAgICAgICAgICAgICAgICBRdWVyeS5saW1pdCgxKVxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgaWYgKHJlc3BvbnNlLmRvY3VtZW50cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpY2Vuc2UgPSByZXNwb25zZS5kb2N1bWVudHNbMF07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBTZSBlbmNvbnRyb3UgdW1hIGxpY2Vuw6dhIGF0aXZhXHJcbiAgICAgICAgICAgIGlmIChsaWNlbnNlLmFjdGl2ZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6ICdzdWNjZXNzJyxcclxuICAgICAgICAgICAgICAgICAgICBzZXJpYWw6IGxpY2Vuc2Uuc2VyaWFsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gU2UgbsOjbyBlbmNvbnRyb3UgbGljZW7Dp2EgYXRpdmFcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oe1xyXG4gICAgICAgICAgICBzdGF0dXM6ICdwZW5kaW5nJ1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJybyBhbyB2ZXJpZmljYXIgbGljZW7Dp2E6JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgICAgICAgIHN0YXR1czogJ2ZhaWxlZCcsXHJcbiAgICAgICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbImRhdGFiYXNlcyIsIlF1ZXJ5IiwiaGFuZGxlciIsInJlcSIsInJlcyIsIm1ldGhvZCIsInN0YXR1cyIsImpzb24iLCJtZXNzYWdlIiwiZW1haWwiLCJib2R5IiwicmVzcG9uc2UiLCJsaXN0RG9jdW1lbnRzIiwiZXF1YWwiLCJvcmRlckRlc2MiLCJsaW1pdCIsImRvY3VtZW50cyIsImxlbmd0aCIsImxpY2Vuc2UiLCJhY3RpdmUiLCJzZXJpYWwiLCJlcnJvciIsImNvbnNvbGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/check-payment.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fcheck-payment&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Ccheck-payment.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();